include: "modules/datasets/Snakefile"

rule all:
  input: "README.md"
  
rule readme:
  input: 
    datasets = "data/datasets/datasets.csv",
    executions = "data/executions/meta.csv"
  output: "README.md"
  script: "README.Rmd"
  
rule execution_design:
  version: "2"
  input:
    datasets = "data/datasets/datasets.csv"
  output:
    design = dynamic("data/executions/{method_id}/{dataset_id}/meta.yaml")
  script:
    "modules/execution_design.R"
    
rule list_executions:
  input: dynamic("data/executions/{method_id}/{dataset_id}/meta.yaml")
  output: "data/executions/meta.csv"
  script: "modules/list_executions.R"
  
rule execute:
  input: "data/executions/{method_id}/{dataset_id}/meta.yaml"
  output: "data/executions/{method_id}/{dataset_id}/model.json"